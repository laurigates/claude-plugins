---
created: 2025-12-23
modified: 2025-12-23
reviewed: 2025-12-23
---

# Plugin Structure

Claude Code plugins follow a standard directory structure with a `plugin.json` manifest.

## Directory Layout

```
plugin-name/
├── .claude-plugin/
│   └── plugin.json          # Required: Plugin manifest
├── commands/
│   └── command-name.md      # Slash commands
├── skills/
│   └── skill-name/
│       └── skill.md         # Skills (auto-discovered by context)
├── agents/                   # Agent definitions (optional)
├── README.md                 # Plugin documentation
└── CHANGELOG.md              # Auto-generated by release-please
```

## plugin.json Schema

### Required Fields

```json
{
  "name": "plugin-name"
}
```

### Recommended Fields

```json
{
  "name": "plugin-name",
  "version": "1.0.0",
  "description": "Brief explanation of plugin purpose",
  "author": {
    "name": "Author Name",
    "email": "author@example.com",
    "url": "https://example.com"
  },
  "repository": "https://github.com/user/repo",
  "license": "MIT",
  "keywords": ["keyword1", "keyword2"]
}
```

### Optional Fields

```json
{
  "commands": "./custom-commands",
  "agents": ["./agents", "./specialized-agents"],
  "hooks": "./config/hooks.json",
  "mcpServers": "./.mcp.json",
  "lspServers": { ... }
}
```

## Field Validation Rules

| Field | Rule |
|-------|------|
| `name` | Kebab-case, starts with letter, no spaces |
| `version` | Semantic versioning (MAJOR.MINOR.PATCH) |
| `commands`/`agents`/`hooks` | Relative paths starting with `./` |

### Name Format

Use kebab-case: lowercase letters, hyphens between words, starts with a letter.

```
my-plugin
api-tester
code-quality-plugin
```

## Custom Component Paths

By default, Claude discovers components in standard directories. Override with explicit paths:

```json
{
  "commands": ["./commands", "./admin-commands"],
  "agents": "./specialized-agents",
  "hooks": "./config/hooks.json",
  "mcpServers": "./.mcp.json"
}
```

## Hooks Configuration

**Inline (simple plugins):**
```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh",
            "timeout": 30
          }
        ]
      }
    ]
  }
}
```

**External file (complex plugins):**
```json
{
  "hooks": "./config/hooks.json"
}
```

## MCP Server Configuration

**Inline:**
```json
{
  "mcpServers": {
    "plugin-api": {
      "command": "${CLAUDE_PLUGIN_ROOT}/servers/api-server",
      "args": ["--port", "8080"],
      "env": {
        "API_KEY": "${API_KEY}"
      }
    }
  }
}
```

**External file:**
```json
{
  "mcpServers": "./.mcp.json"
}
```

## Version Management

Versions are managed automatically by release-please. Use conventional commits to trigger version bumps.

See `.claude/rules/release-please.md` for details.
